<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Accédez à votre espace personnel Auduj pour saisir vos parties Marvel Rivals, consulter vos statistiques détaillées et analyser votre progression.">
    <title>Tableau de Bord - Auduj | Suivi Stats Marvel Rivals</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script>
        // Configuration Tailwind
        tailwind.config = {
             theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], heading: ['Bangers', 'cursive'] },
                    colors: { 'marvel-red': '#e62429', 'marvel-blue': '#007bff', 'marvel-yellow': '#ffc107', 'dark-bg': '#1a202c', 'light-text': '#e2e8f0', 'card-bg': '#2d3748', 'input-bg': '#4a5568', 'win': '#48bb78', 'loss': '#f56565' }
                }
            }
        };
    </script>
    <style>
        /* Styles CSS */
        .font-heading { font-family: 'Bangers', cursive; letter-spacing: 1px; }
        body { font-family: 'Inter', sans-serif; }
        .btn-marvel { @apply inline-block px-6 py-3 rounded-lg text-white font-semibold tracking-wide shadow-md transition duration-300 ease-in-out transform hover:-translate-y-1; }
        .btn-red { @apply bg-marvel-red hover:bg-red-700; }
        .btn-blue { @apply bg-marvel-blue hover:bg-blue-700; }
        .btn-logout { @apply bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg text-sm; }
        /* Style des inputs du dashboard (texte gris clair) */
        .form-input-dash {
            @apply w-full px-3 py-2 rounded-md bg-gray-700 border border-gray-600 text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-marvel-blue focus:border-marvel-blue transition duration-200 ease-in-out text-sm;
        }
        /* Style des labels (au-dessus de l'input) */
        .form-label-dash {
            @apply block mb-1.5 text-xs font-medium text-gray-300; /* Suppression de flex et de l'icône */
        }
        .stat-card { @apply bg-card-bg p-4 rounded-lg shadow-lg text-center; }
        .stat-value { @apply text-3xl font-bold text-marvel-yellow mb-1; }
        .stat-label { @apply text-sm text-gray-400; }
        .tab-button { @apply px-4 py-2 rounded-t-lg font-semibold transition duration-300; }
        .tab-button.active { @apply bg-card-bg text-marvel-yellow; }
        .tab-button:not(.active) { @apply text-gray-400 hover:bg-gray-700 hover:text-light-text; }
        .tab-content { @apply p-4 bg-card-bg rounded-b-lg rounded-tr-lg; }
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
             -webkit-appearance: none; margin: 0;
        }
        input[type=number] { -moz-appearance: textfield; /* Firefox */ }
        /* Hauteur fixe pour les conteneurs de graphiques */
        .chart-container {
            @apply relative h-64 md:h-80; /* Ajustez la hauteur si nécessaire */
        }
    </style>
</head>
<body class="bg-dark-bg text-light-text">

    <header class="bg-card-bg shadow-lg sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center"> <a href="index.html" class="text-3xl font-heading text-marvel-red">Auduj</a> <div class="hidden md:flex space-x-6 items-center"> <a href="index.html" class="hover:text-marvel-yellow transition duration-300">Accueil</a> <a href="how-it-works.html" class="hover:text-marvel-yellow transition duration-300">Comment Ça Marche ?</a> <a href="features.html" class="hover:text-marvel-yellow transition duration-300">Fonctionnalités</a> <a href="guides.html" class="hover:text-marvel-yellow transition duration-300">Guides</a> <div id="user-info" class="items-center space-x-4 hidden"> <span id="user-greeting" class="text-sm text-gray-300"></span> <button id="logout-button" class="btn-logout"> <i class="fas fa-sign-out-alt mr-1"></i> Déconnexion </button> </div> <a href="login.html" id="login-button-header" class="btn-marvel btn-blue hidden">Connexion</a> </div> <div class="md:hidden"> <button id="mobile-menu-button" class="text-light-text focus:outline-none"> <i class="fas fa-bars fa-lg"></i> </button> </div> </nav> <div id="mobile-menu" class="hidden md:hidden bg-card-bg"> <a href="index.html" class="block px-4 py-2 text-sm hover:bg-gray-700">Accueil</a> <a href="how-it-works.html" class="block px-4 py-2 text-sm hover:bg-gray-700">Comment Ça Marche ?</a> <a href="features.html" class="block px-4 py-2 text-sm hover:bg-gray-700">Fonctionnalités</a> <a href="guides.html" class="block px-4 py-2 text-sm hover:bg-gray-700">Guides</a> <a href="login.html" id="mobile-login-link" class="block px-4 py-2 text-sm font-semibold text-marvel-blue hover:bg-gray-700 hidden">Connexion</a> <span id="mobile-user-greeting" class="block px-4 py-2 text-sm text-gray-400 hidden"></span> <button id="mobile-logout-button" class="w-full text-left block px-4 py-2 text-sm text-marvel-red hover:bg-gray-700 hidden">Déconnexion</button> </div>
    </header>

    <main id="dashboard-content" class="container mx-auto px-6 py-12 md:py-16 hidden">

            <h1 class="text-4xl md:text-5xl font-heading text-center mb-10 text-marvel-red drop-shadow-md">Votre Tableau de Bord Auduj</h1>
            <p class="text-lg text-center mb-12 max-w-3xl mx-auto text-gray-300">Saisissez vos dernières parties, consultez vos statistiques globales et plongez dans les analyses détaillées.</p>

            <section id="saisie-partie" class="mb-12 bg-card-bg p-8 rounded-lg shadow-lg border border-gray-700">
                 <h2 class="text-3xl font-heading mb-8 text-marvel-yellow text-center"><i class="fas fa-pencil-alt mr-2"></i>Saisir une Nouvelle Partie</h2>
                <form id="game-entry-form" action="#" method="POST" class="space-y-5">
                    <div id="entry-feedback" class="mb-4 text-center hidden"></div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4"> <div> <label for="hero" class="form-label-dash">Héros Joué</label> <select id="hero" name="hero" class="form-input-dash" required><option value="">Choisir Héros...</option></select> </div> <div> <label for="map" class="form-label-dash">Map</label> <select id="map" name="map" class="form-input-dash" required><option value="">Choisir Map...</option></select> </div> </div>
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-x-4 gap-y-4"> <div> <label for="kills" class="form-label-dash">Kills</label> <input type="number" id="kills" name="kills" min="0" class="form-input-dash" placeholder="0" required> </div> <div> <label for="deaths" class="form-label-dash">Deaths</label> <input type="number" id="deaths" name="deaths" min="0" class="form-input-dash" placeholder="0" required> </div> <div> <label for="assists" class="form-label-dash">Assists</label> <input type="number" id="assists" name="assists" min="0" class="form-input-dash" placeholder="0" required> </div> <div> <label for="solo_kills" class="form-label-dash">Élim. Solo</label> <input type="number" id="solo_kills" name="solo_kills" min="0" class="form-input-dash" placeholder="0"> </div> <div> <label for="head_kills" class="form-label-dash">Tirs Tête</label> <input type="number" id="head_kills" name="head_kills" min="0" class="form-input-dash" placeholder="0"> </div> </div>
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-x-4 gap-y-4"> <div> <label for="last_kills" class="form-label-dash">Last Kills</label> <input type="number" id="last_kills" name="last_kills" min="0" class="form-input-dash" placeholder="0"> </div> <div> <label for="damage_dealt" class="form-label-dash">Dégâts</label> <input type="number" id="damage_dealt" name="damage_dealt" min="0" class="form-input-dash" placeholder="0"> </div> <div> <label for="healing_done" class="form-label-dash">Soins</label> <input type="number" id="healing_done" name="healing_done" min="0" class="form-input-dash" placeholder="0"> </div> <div> <label for="damage_blocked" class="form-label-dash">Bloqués</label> <input type="number" id="damage_blocked" name="damage_blocked" min="0" class="form-input-dash" placeholder="0"> </div> <div> <label for="accuracy" class="form-label-dash">Précision (%)</label> <input type="number" id="accuracy" name="accuracy" min="0" max="100" step="0.1" class="form-input-dash" placeholder="ex: 45.5"> </div> </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6"> <div> <label for="result" class="form-label-dash">Résultat</label> <select id="result" name="result" class="form-input-dash" required> <option value="">Choisir...</option> <option value="win" class="text-win">Victoire</option> <option value="loss" class="text-loss">Défaite</option> <option value="draw">Égalité</option> </select> </div> <div class="md:col-span-2"> <label for="notes" class="form-label-dash">Notes (Optionnel)</label> <textarea id="notes" name="notes" rows="3" class="form-input-dash" placeholder="Stratégie utilisée, points à améliorer..."></textarea> </div> </div>
                    <div class="pt-4 text-center"> <button type="submit" class="btn-marvel btn-red w-full sm:w-auto sm:px-10"> <i class="fas fa-save mr-2"></i> SAUVEGARDER LA PARTIE </button> </div>
                </form>
            </section>

            <section class="mb-12">
                 <h2 class="text-2xl font-heading mb-4 text-marvel-yellow"><i class="fas fa-chart-bar mr-2"></i>Aperçu Global</h2> <div class="grid grid-cols-2 md:grid-cols-4 gap-4"> <div class="stat-card"> <div id="stat-kda" class="stat-value">-.--</div> <div class="stat-label">KDA Global</div> </div> <div class="stat-card"> <div id="stat-winrate" class="stat-value">--%</div> <div class="stat-label">Taux de Victoire</div> </div> <div class="stat-card"> <div id="stat-total-games" class="stat-value">0</div> <div class="stat-label">Parties Jouées</div> </div> <div class="stat-card"> <div id="stat-main-hero" class="stat-value text-xl truncate" title="Héros Principal">N/A</div> <div class="stat-label">Héros Principal</div> </div> </div>
            </section>

            <section>
                <h2 class="text-2xl font-heading mb-4 text-marvel-yellow"><i class="fas fa-search-plus mr-2"></i>Analyses Détaillées</h2>
                <div class="mb-4 border-b border-gray-700">
                    <nav class="-mb-px flex space-x-1" aria-label="Tabs">
                        <button class="tab-button active" data-tab="progression">Progression</button>
                        <button class="tab-button" data-tab="par-heros">Par Héros</button>
                        <button class="tab-button" data-tab="par-map">Par Map</button>
                        <button class="tab-button" data-tab="historique">Historique Parties</button>
                    </nav>
                </div>
                <div>
                    <div class="tab-content space-y-8" data-tab-content="progression"> <div>
                            <h3 class="text-xl font-semibold mb-4 text-light-text">Progression KDA</h3>
                            <div class="bg-card-bg p-4 rounded chart-container"> <canvas id="progressionChart"></canvas>
                            </div>
                            <p class="text-sm text-gray-500 mt-2">Évolution de votre KDA calculé pour chaque partie.</p>
                         </div>
                         <div> <h3 class="text-xl font-semibold mb-4 text-light-text">Progression Précision (%)</h3>
                             <div class="bg-card-bg p-4 rounded chart-container"> <canvas id="accuracyChart"></canvas> </div>
                            <p class="text-sm text-gray-500 mt-2">Évolution de votre précision enregistrée pour chaque partie.</p>
                         </div>
                     </div>
                     <div class="tab-content hidden" data-tab-content="par-heros">
                         <h3 class="text-xl font-semibold mb-4 text-light-text">Statistiques par Héros</h3>
                         <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-700">
                                <thead class="bg-gray-800">
                                    <tr>
                                        <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Héros</th>
                                        <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Parties</th>
                                        <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Winrate</th>
                                        <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">KDA</th>
                                        <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Dégâts Moy.</th>
                                        <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Soins Moy.</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-card-bg divide-y divide-gray-700">
                                    <tr><td colspan="6" class="text-center text-gray-500 py-4">Chargement...</td></tr> </tbody>
                            </table>
                         </div>
                     </div>
                     <div class="tab-content hidden" data-tab-content="par-map">
                        <h3 class="text-xl font-semibold mb-4 text-light-text">Statistiques par Map</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-700">
                                <thead class="bg-gray-800"><tr><th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Map</th><th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Parties</th><th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Winrate</th></tr></thead>
                                <tbody class="bg-card-bg divide-y divide-gray-700">
                                    <tr><td colspan="3" class="text-center text-gray-500 py-4">Chargement...</td></tr>
                                </tbody>
                            </table>
                        </div>
                     </div>
                     <div class="tab-content hidden" data-tab-content="historique">
                        <h3 class="text-xl font-semibold mb-4 text-light-text">Historique des Parties</h3>
                        <div class="overflow-x-auto">
                            <table id="history-table" class="min-w-full divide-y divide-gray-700">
                                <thead class="bg-gray-800"><tr><th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Date</th><th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Héros</th><th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Map</th><th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">K/D/A</th><th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Résultat</th><th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Notes</th></tr></thead>
                                <tbody class="bg-card-bg divide-y divide-gray-700">
                                    <tr><td colspan="6" class="text-center text-gray-500 py-4">Chargement de l'historique...</td></tr>
                                </tbody>
                            </table>
                        </div>
                     </div>
                 </div>
            </section>

    </main> <footer class="bg-card-bg text-gray-400 py-8 mt-16">
         <div class="container mx-auto px-6 text-center"> <p class="mb-4">&copy; 2025 Auduj - Tous droits réservés.</p> <p class="mt-4 text-sm">Auduj n'est pas affilié à Marvel ou aux développeurs de Marvel Rivals.</p> </div>
    </footer>

    <script src="assets/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script src="assets/js/supabase-integration.js"></script>

    <script>
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const tabName = button.getAttribute('data-tab');
                tabButtons.forEach(btn => btn.classList.remove('active', 'bg-card-bg', 'text-marvel-yellow'));
                button.classList.add('active', 'bg-card-bg', 'text-marvel-yellow');
                tabContents.forEach(content => {
                    if (content.getAttribute('data-tab-content') === tabName) {
                        content.classList.remove('hidden');
                    } else {
                        content.classList.add('hidden');
                    }
                });
            });
        });
    </script>
</body>
</html>
